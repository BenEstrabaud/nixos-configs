# MetalLB load balancer for k3s.
# Replaces k3s's built-in klipper-lb (disabled via --disable=servicelb in services.nix).
# Services of type LoadBalancer will get IPs from the pool defined in metallb-config.yaml.
# The metallb-config.yaml is generated by services.nix with a configurable IP range.
#
# MetalLB uses L2 mode (ARP/NDP) to announce IPs on the local LAN â€” no BGP router needed.
apiVersion: helm.cattle.io/v1
kind: HelmChart
metadata:
  name: metallb
  namespace: kube-system
spec:
  repo: https://metallb.github.io/metallb
  chart: metallb
  version: "0.14.9"
  targetNamespace: metallb-system
  createNamespace: true
